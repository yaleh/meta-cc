# Phase 8 æ‰©å±•æ€»ç»“ï¼šä¸Šä¸‹æ–‡æŸ¥è¯¢ä¸å·¥ä½œæµåˆ†æ

## æ¦‚è¿°

åŸºäºè½¯ä»¶å·¥ç¨‹å’Œæ¶æ„åˆ†æï¼ŒPhase 8 æ–°å¢ **Stage 8.10-8.11**ï¼Œæ‰©å±•ä¸Šä¸‹æ–‡æŸ¥è¯¢å’Œå·¥ä½œæµæ¨¡å¼æ£€æµ‹èƒ½åŠ›ï¼ŒåŒæ—¶ä¸¥æ ¼éµå®ˆ **meta-cc èŒè´£è¾¹ç•ŒåŸåˆ™**ã€‚

## æ ¸å¿ƒè®¾è®¡åŸåˆ™ï¼ˆå·²ç¡®è®¤ï¼‰

### èŒè´£åˆ†ç¦»

**meta-cc èŒè´£**ï¼ˆæ—  LLM/NLPï¼‰ï¼š
- âœ… æ•°æ®æå–ã€è¿‡æ»¤ã€èšåˆã€ç»Ÿè®¡
- âœ… æ¨¡å¼æ£€æµ‹ï¼ˆåŸºäºè§„åˆ™ï¼Œå¦‚åºåˆ—é‡å¤ã€é¢‘ç‡ç»Ÿè®¡ï¼‰
- âœ… è¾“å‡ºç»“æ„åŒ–æ•°æ®ï¼ˆJSON/Markdownï¼‰
- âŒ **ç»ä¸åš**: è¯­ä¹‰åˆ¤æ–­ã€Prompt ç”Ÿæˆã€å»ºè®®è¾“å‡º

**Claude é›†æˆå±‚èŒè´£**ï¼ˆSlash Commands/Subagent/MCPï¼‰ï¼š
- âœ… è¯­ä¹‰ç†è§£ï¼ˆç†è§£ç”¨æˆ·æ„å›¾ï¼‰
- âœ… ä¸Šä¸‹æ–‡å…³è”ï¼ˆå°†å¤šä¸ª meta-cc è¾“å‡ºå…³è”åˆ†æï¼‰
- âœ… å»ºè®®ç”Ÿæˆï¼ˆåŸºäºæ•°æ®ç»™å‡ºå¯æ“ä½œå»ºè®®ï¼‰
- âœ… å¯¹è¯äº¤äº’ï¼ˆSubagent çš„å¤šè½®å¯¹è¯ï¼‰

### æ•°æ®æµå‘

```
ç”¨æˆ·éœ€æ±‚ï¼ˆå£è¯­åŒ–ï¼‰
  â†“
Slash Command/Subagentï¼ˆç†è§£æ„å›¾ï¼‰
  â†“
è°ƒç”¨ meta-cc å‘½ä»¤ï¼ˆç²¾å‡†æ£€ç´¢ï¼‰
  â†“
meta-cc è¿”å›ç»“æ„åŒ–æ•°æ®ï¼ˆæ— è¯­ä¹‰åˆ¤æ–­ï¼‰
  â†“
Claude è¯­ä¹‰åˆ†æ + å»ºè®®ç”Ÿæˆ
  â†“
ç”¨æˆ·æ¥æ”¶å¯æ“ä½œå»ºè®®
```

## æ–°å¢åŠŸèƒ½ï¼ˆStage 8.10-8.11ï¼‰

### Stage 8.10: ä¸Šä¸‹æ–‡å’Œå…³è”æŸ¥è¯¢

**ä»£ç é‡**: ~180 lines
**æ—¶é—´**: 2-3 hours
**ä¼˜å…ˆçº§**: High

**æ–°å¢å‘½ä»¤**:

1. **`query context`** - é”™è¯¯ä¸Šä¸‹æ–‡æŸ¥è¯¢
   ```bash
   meta-cc query context --error-signature err-a1b2 --window 3
   ```
   è¿”å›ï¼šé”™è¯¯å‘ç”Ÿå‰å N ä¸ª turns çš„å®Œæ•´ä¸Šä¸‹æ–‡

2. **`query file-access`** - æ–‡ä»¶æ“ä½œå†å²
   ```bash
   meta-cc query file-access --file test_auth.js
   ```
   è¿”å›ï¼šæ–‡ä»¶çš„æ‰€æœ‰ Read/Edit/Write æ“ä½œç»Ÿè®¡

3. **`query tool-sequences`** - å·¥å…·åºåˆ—æ¨¡å¼
   ```bash
   meta-cc query tool-sequences --min-occurrences 3
   ```
   è¿”å›ï¼šé‡å¤å‡ºç°çš„å·¥å…·è°ƒç”¨åºåˆ—ï¼ˆå¦‚ Read â†’ Edit â†’ Bashï¼‰

4. **æ—¶é—´çª—å£æŸ¥è¯¢**
   ```bash
   meta-cc query tools --since "5 minutes ago"
   meta-cc query tools --last-n-turns 10
   ```

**åº”ç”¨åœºæ™¯**:
- Slash Commands è·å–é”™è¯¯ä¸Šä¸‹æ–‡è¿›è¡Œåˆ†æ
- @meta-coach ä½¿ç”¨æ–‡ä»¶è®¿é—®å†å²è¯†åˆ«å›°æƒ‘ç‚¹
- MCP Server æä¾›æ›´ä¸°å¯Œçš„æŸ¥è¯¢æ¥å£

### Stage 8.11: å·¥ä½œæµæ¨¡å¼æ•°æ®æ”¯æŒ

**ä»£ç é‡**: ~100 lines
**æ—¶é—´**: 1-2 hours
**ä¼˜å…ˆçº§**: Medium

**æ–°å¢å‘½ä»¤**:

1. **`analyze sequences`** - å·¥å…·åºåˆ—æ£€æµ‹
   ```bash
   meta-cc analyze sequences --min-length 3 --min-occurrences 3
   ```
   è¿”å›ï¼šé‡å¤çš„å·¥å…·è°ƒç”¨æ¨¡å¼ï¼ˆçº¯ç»Ÿè®¡ï¼Œæ— è¯­ä¹‰åˆ¤æ–­ï¼‰

2. **`analyze file-churn`** - æ–‡ä»¶é¢‘ç¹ä¿®æ”¹æ£€æµ‹
   ```bash
   meta-cc analyze file-churn --threshold 5
   ```
   è¿”å›ï¼šè®¿é—®æ¬¡æ•° â‰¥ 5 çš„æ–‡ä»¶ç»Ÿè®¡

3. **`analyze idle-periods`** - æ—¶é—´é—´éš”åˆ†æ
   ```bash
   meta-cc analyze idle-periods --threshold "5 minutes"
   ```
   è¿”å›ï¼šè¶…è¿‡ 5 åˆ†é’Ÿçš„ç©ºé—²æ—¶æ®µ

**åº”ç”¨åœºæ™¯**:
- @meta-coach ä½¿ç”¨åºåˆ—æ£€æµ‹è¯†åˆ«é‡å¤æ¨¡å¼
- Slash Commands ä½¿ç”¨ file-churn è¯†åˆ«é—®é¢˜çƒ­ç‚¹
- å·¥ä½œæµè¯Šæ–­æ—¶ä½¿ç”¨ idle-periods åˆ†æå¡ç‚¹

## æ–°å¢ Slash Commandsï¼ˆç¤ºä¾‹ï¼‰

### /meta-error-context

```markdown
---
name: meta-error-context
argument-hint: [error-pattern-id]
---

\`\`\`bash
error_id=${1:-"latest"}
context=$(meta-cc query context --error-signature "$error_id" --window 3 --output json)
\`\`\`

Claudeï¼ŒåŸºäºä»¥ä¸Šä¸Šä¸‹æ–‡æ•°æ®ï¼š
1. åˆ†æé”™è¯¯å‘ç”Ÿå‰çš„æ“ä½œ
2. æ£€æŸ¥é”™è¯¯å‘ç”Ÿåçš„å°è¯•æ˜¯å¦æœ‰æ•ˆ
3. å»ºè®®å…·ä½“çš„è°ƒè¯•æ­¥éª¤
```

### /meta-workflow-check

```markdown
---
name: meta-workflow-check
description: æ£€æŸ¥å·¥ä½œæµæ¨¡å¼ï¼Œè¯†åˆ«ä½æ•ˆæ“ä½œ
---

\`\`\`bash
sequences=$(meta-cc analyze sequences --min-length 3 --min-occurrences 3 --output json)
file_churn=$(meta-cc analyze file-churn --threshold 5 --output json)
idle_periods=$(meta-cc analyze idle-periods --threshold "5 minutes" --output json)
\`\`\`

Claudeï¼ŒåŸºäºä»¥ä¸Šæ•°æ®ï¼š
1. è¯†åˆ«é‡å¤çš„å·¥ä½œæµæ¨¡å¼
2. æ ‡è®°å¯èƒ½çš„ä½æ•ˆç‚¹
3. ç»™å‡ºä¼˜åŒ–å»ºè®®
```

## @meta-coach å¢å¼º

### æ–°å¢ç« èŠ‚ï¼šå·¥ä½œæµæ¨¡å¼åˆ†æ

```markdown
## å·¥ä½œæµæ¨¡å¼åˆ†æ

å½“ç”¨æˆ·è¯´"æ„Ÿè§‰æ•ˆç‡ä½"æˆ–"ä¸çŸ¥é“å“ªé‡Œæœ‰é—®é¢˜"æ—¶ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å–æ•°æ®ï¼š

\`\`\`bash
# æ£€æµ‹å·¥å…·åºåˆ—
sequences=$(meta-cc analyze sequences --min-length 3 --min-occurrences 3 --output json)

# æ£€æµ‹æ–‡ä»¶é¢‘ç¹ä¿®æ”¹
file_churn=$(meta-cc analyze file-churn --threshold 5 --output json)

# æ£€æµ‹ç©ºé—²æ—¶æ®µ
idle_periods=$(meta-cc analyze idle-periods --threshold "5 minutes" --output json)

# è·å–æœ€è¿‘æ´»åŠ¨
recent=$(meta-cc query tools --last-n-turns 20 --output json)
\`\`\`

åŸºäºä»¥ä¸Šæ•°æ®ï¼Œæˆ‘ä¼šï¼š
1. è¯†åˆ«é‡å¤çš„å·¥å…·åºåˆ— â†’ åˆ¤æ–­æ˜¯å¦ä½æ•ˆï¼ˆè¯­ä¹‰ç†è§£ï¼‰
2. å‘ç°é¢‘ç¹ä¿®æ”¹çš„æ–‡ä»¶ â†’ åˆ¤æ–­æ˜¯å¦å›°æƒ‘ï¼ˆè¯­ä¹‰ç†è§£ï¼‰
3. åˆ†æç©ºé—²æ—¶æ®µ â†’ åˆ¤æ–­æ˜¯å¦å¡ä½ï¼ˆè¯­ä¹‰ç†è§£ï¼‰
4. ç»“åˆæœ€è¿‘æ´»åŠ¨ â†’ ç»™å‡ºå…·ä½“å»ºè®®ï¼ˆè¯­ä¹‰ç”Ÿæˆï¼‰
```

## MCP Server é›†æˆï¼ˆStage 8.8 æ›´æ–°ï¼‰

æ–°å¢ MCP å·¥å…·ï¼š

```json
{
  "name": "query_context",
  "description": "è·å–ç‰¹å®šé”™è¯¯/æ–‡ä»¶çš„ä¸Šä¸‹æ–‡",
  "inputSchema": {
    "error_signature": "string (optional)",
    "file": "string (optional)",
    "window": "number (default 3)"
  }
}
```

```json
{
  "name": "get_workflow_patterns",
  "description": "æ£€æµ‹å·¥ä½œæµæ¨¡å¼ï¼ˆå·¥å…·åºåˆ—ã€æ–‡ä»¶è®¿é—®ï¼‰",
  "inputSchema": {
    "min_occurrences": "number (default 3)"
  }
}
```

**è‡ªç„¶è¯­è¨€æŸ¥è¯¢ç¤ºä¾‹**:

```
User: "åˆ†æé‚£ä¸ª TypeError é”™è¯¯çš„ä¸Šä¸‹æ–‡"
â†’ Claude è°ƒç”¨: query_context(error_signature="err-a1b2", window=3)
â†’ Claude åˆ†æè¿”å›çš„ä¸Šä¸‹æ–‡æ•°æ®å¹¶ç»™å‡ºå»ºè®®

User: "å¸®æˆ‘åˆ†æä¸€ä¸‹æˆ‘çš„å·¥ä½œæµï¼Œçœ‹çœ‹æœ‰æ²¡æœ‰ä½æ•ˆçš„åœ°æ–¹"
â†’ Claude è°ƒç”¨: get_workflow_patterns(min_occurrences=3)
â†’ Claude åˆ†æè¿”å›çš„æ¨¡å¼æ•°æ®å¹¶ç»™å‡ºä¼˜åŒ–å»ºè®®
```

## å®æ–½ä¼˜å…ˆçº§

### é«˜ä¼˜å…ˆçº§ï¼ˆç«‹å³å®æ–½ï¼‰
1. **Stage 8.10**: ä¸Šä¸‹æ–‡å’Œå…³è”æŸ¥è¯¢ï¼ˆ2-3hï¼‰
   - ä¸º Slash Commands/Subagent æä¾›ä¸Šä¸‹æ–‡æ£€ç´¢
   - è§£å†³"å¦‚ä½•è·å–é”™è¯¯ä¸Šä¸‹æ–‡"çš„ç—›ç‚¹

2. **Stage 8.11**: å·¥ä½œæµæ¨¡å¼æ•°æ®æ”¯æŒï¼ˆ1-2hï¼‰
   - ä¸º @meta-coach æä¾›å·¥ä½œæµåˆ†ææ•°æ®
   - å¸®åŠ©è¯†åˆ«ä½æ•ˆæ¨¡å¼

### ä¸­ä¼˜å…ˆçº§ï¼ˆåç»­å®æ–½ï¼‰
3. **Stage 8.8-8.9**: MCP Server é›†æˆï¼ˆ2hï¼‰
   - ä½¿ç”¨ 8.10-8.11 æ–°å‘½ä»¤
   - å®Œå–„ MCP å·¥å…·é›†

## æ–‡æ¡£æ›´æ–°

### å·²æ›´æ–°
- âœ… `docs/plan.md` - Phase 8-11 æè¿°æ›´æ–°
- âœ… `plans/8/phase.md` - å®Œæ•´ Stage 8.10-8.11 è§„åˆ’
- âœ… `plans/8/README.md` - ä»£ç é‡æ›´æ–°
- âœ… `plans/8/stage-8.10.md` - è¯¦ç»†å®æ–½è®¡åˆ’
- âœ… `plans/8/stage-8.11.md` - è¯¦ç»†å®æ–½è®¡åˆ’

### å¾…åˆ›å»ºï¼ˆå®æ–½æ—¶ï¼‰
- ğŸ“‹ `.claude/commands/meta-error-context.md`
- ğŸ“‹ `.claude/commands/meta-workflow-check.md`
- ğŸ“‹ æ›´æ–° `.claude/agents/meta-coach.md`ï¼ˆå·¥ä½œæµåˆ†æç« èŠ‚ï¼‰

## æˆåŠŸæ ‡å‡†

### åŠŸèƒ½éªŒè¯
- âœ… `query context` è¿”å›å®Œæ•´ä¸Šä¸‹æ–‡
- âœ… `query file-access` ç»Ÿè®¡æ–‡ä»¶æ“ä½œ
- âœ… `analyze sequences` æ£€æµ‹é‡å¤åºåˆ—
- âœ… æ—¶é—´è¿‡æ»¤å™¨æ­£å¸¸å·¥ä½œ
- âœ… å·¥ä½œæµæ¨¡å¼æ£€æµ‹æä¾›æ•°æ®ï¼ˆæ— è¯­ä¹‰åˆ¤æ–­ï¼‰

### é›†æˆéªŒè¯
- âœ… Slash Commands èƒ½ä½¿ç”¨æ–°å‘½ä»¤
- âœ… @meta-coach èƒ½åŸºäºæ–°æ•°æ®è¿›è¡Œåˆ†æ
- âœ… MCP Server æ”¯æŒè‡ªç„¶è¯­è¨€æŸ¥è¯¢
- âœ… æ‰€æœ‰è¾“å‡ºä¸åŒ…å«è¯­ä¹‰åˆ¤æ–­ï¼Œä»…ç»Ÿè®¡äº‹å®

## å…³é”®æ”¹è¿›ç‚¹æ€»ç»“

### ç›¸æ¯”åŸå»ºè®®çš„ä¿®æ­£

**åŸå»ºè®®**ï¼ˆä¸ç¬¦åˆè®¾è®¡åŸåˆ™ï¼‰ï¼š
- âŒ `meta-cc suggest next-prompt`ï¼ˆè¯­ä¹‰åˆ¤æ–­ï¼‰
- âŒ `meta-cc refine prompt`ï¼ˆNLP å¤„ç†ï¼‰

**ä¿®æ­£å**ï¼ˆç¬¦åˆè®¾è®¡åŸåˆ™ï¼‰ï¼š
- âœ… `meta-cc query context`ï¼ˆæ•°æ®æå–ï¼‰
- âœ… `meta-cc analyze sequences`ï¼ˆç»Ÿè®¡åˆ†æï¼‰
- âœ… Slash Commands/Subagent è´Ÿè´£è¯­ä¹‰ç†è§£

### æ ¸å¿ƒä»·å€¼

1. **ä¸¥æ ¼èŒè´£åˆ†ç¦»**
   - meta-cc çº¯æ•°æ®å¤„ç†ï¼Œæ˜“äºæµ‹è¯•å’Œç»´æŠ¤
   - Claude é›†æˆå±‚è´Ÿè´£è¯­ä¹‰ç†è§£ï¼Œå……åˆ†å‘æŒ¥ LLM èƒ½åŠ›

2. **ä¸°å¯Œæ•°æ®æ¥å£**
   - ä¸Šä¸‹æ–‡æŸ¥è¯¢è§£å†³"å¦‚ä½•è·å–ç›¸å…³ä¿¡æ¯"
   - å·¥ä½œæµæ¨¡å¼æ£€æµ‹æä¾›åˆ†ææ‰€éœ€æ•°æ®

3. **å¯æ‰©å±•æ€§**
   - æ–°å‘½ä»¤æ˜“äºé›†æˆåˆ° Slash/Subagent/MCP
   - æ•°æ®æ ¼å¼æ ‡å‡†åŒ–ï¼Œä¾¿äºåç»­å¢å¼º

## ä¸‹ä¸€æ­¥è¡ŒåŠ¨

ç”¨æˆ·æ‰‹åŠ¨å¯åŠ¨æ‰§è¡Œæ—¶ï¼š

1. å®æ–½ Stage 8.10ï¼ˆ2-3hï¼‰
2. å®æ–½ Stage 8.11ï¼ˆ1-2hï¼‰
3. æ›´æ–° Slash Commands å’Œ @meta-coach
4. æµ‹è¯•æ‰€æœ‰é›†æˆ
5. æ›´æ–°ä¸»æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**åˆ›å»ºæ—¶é—´**: 2025-10-03
**ä¾æ®**: è½¯ä»¶å·¥ç¨‹å’Œæ¶æ„åˆ†æå»ºè®®ï¼ˆä¿®æ­£ç‰ˆï¼‰
